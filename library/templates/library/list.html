{% extends "base.html" %}
{% block content %}
  <h1>Downloadable Music</h1>
  <a class="btn" href="{% url 'user_activity' %}">View Past Downloads & Favorites</a>

  {% if files %}
    <ul>
      {% for f in files %}
        <li>
          {{ f }} —
          <a class="btn" href="{% url 'download_music' f %}">Download</a>
          <form method="post" action="{% url 'toggle_favorite' f %}" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="btn">
              {% if f in favorites %}
                ★ Unfavorite
              {% else %}
                ☆ Favorite
              {% endif %}
            </button>
          </form>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No music files found in <code>music_files</code>.</p>
  {% endif %}
{% endblock %}
